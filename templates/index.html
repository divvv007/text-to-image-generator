<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Text to Image Generator</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: radial-gradient(circle at top, #1e293b, #020617);
}

/* ---------- Glass Card ---------- */
.glass {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.1);
}

/* ---------- Buttons ---------- */
.btn-gradient {
    background: linear-gradient(135deg, #38bdf8, #6366f1);
    border: none;
    color: #fff;
}
.btn-gradient:hover {
    opacity: 0.9;
}

/* ---------- Image Hover ---------- */
.image-card {
    position: relative;
    overflow: hidden;
    cursor: pointer;
}
.image-card img {
    transition: transform .5s ease;
}
.image-card:hover img {
    transform: scale(1.12);
}

/* ---------- Overlay ---------- */
.image-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.6);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: .3s;
}
.image-card:hover .image-overlay {
    opacity: 1;
}

/* ---------- Masonry ---------- */
.masonry {
    column-count: 3;
    column-gap: 1rem;
}
@media (max-width: 992px) {
    .masonry { column-count: 2; }
}
@media (max-width: 576px) {
    .masonry { column-count: 1; }
}
.masonry-item {
    break-inside: avoid;
    margin-bottom: 1rem;
}

/* ---------- Action Icons ---------- */
.action-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
</style>

<script>
function showLoader(){
    document.getElementById("loader").classList.remove("d-none");
}
function openModal(src){
    document.getElementById("modalImage").src = src;
}
</script>
</head>

<body class="text-light">

<!-- NAVBAR -->
<nav class="navbar navbar-expand bg-black px-4 shadow">
    <span class="navbar-brand fw-bold fs-4">ğŸ¨ Text-to-image generator</span>
    <div class="ms-auto">
        <a href="/dashboard" class="btn btn-outline-warning btn-sm me-2">Gallery</a>
        <a href="/logout" class="btn btn-outline-danger btn-sm">Logout</a>
    </div>
</nav>

<!-- MAIN -->
<div class="container py-5">
<div class="row justify-content-center">
<div class="col-lg-9">

<!-- FORM -->
<div class="glass rounded-4 shadow-lg mb-5 p-4">
<h3 class="text-center mb-1">Create AI Images</h3>
<p class="text-center text-secondary mb-4">
Turn imagination into visuals using AI âœ¨
</p>

<form method="POST" onsubmit="showLoader()">

<textarea class="form-control mb-3 bg-dark text-light border-0"
          name="prompt"
          rows="3"
          placeholder="A cyberpunk city glowing at night..."
          required></textarea>

<div class="row mb-3">
<div class="col-md-6">
<select name="style" class="form-select bg-dark text-light border-0" required>
<option value="realistic">ğŸ¥ Realistic</option>
<option value="anime">ğŸ¨ Anime</option>
<option value="sketch">âœ Sketch</option>
</select>
</div>

<div class="col-md-6">
<select name="count" class="form-select bg-dark text-light border-0" required>
<option value="1">1 Image</option>
<option value="2">2 Images</option>
<option value="3">3 Images</option>
</select>
</div>
</div>

<button class="btn btn-gradient w-100 btn-lg fw-semibold">
âœ¨ Generate Images
</button>
</form>

<div id="loader" class="mt-4 d-none">
<div class="progress">
<div class="progress-bar progress-bar-striped progress-bar-animated bg-info" style="width:100%"></div>
</div>
<p class="text-center mt-2 text-secondary">Hold on while we generate your images...</p>
</div>
</div>

<!-- RESULTS -->
{% if images %}
<h4 class="mb-3">ğŸ–¼ Generated Images</h4>

<div class="masonry">
{% for img in images %}
<div class="masonry-item">
<div class="glass rounded-4 shadow">

<div class="image-card"
     data-bs-toggle="modal"
     data-bs-target="#imageModal"
     onclick="openModal('{{ url_for('static', filename='images/' + img) }}')">

<img src="{{ url_for('static', filename='images/' + img) }}"
     class="img-fluid rounded-top">

<div class="image-overlay">
<span class="btn btn-light btn-sm">ğŸ” Preview</span>
</div>
</div>

<div class="p-3 d-flex justify-content-around">
<a href="/like/{{ img }}" class="btn btn-outline-danger action-btn">â¤ï¸</a>
<a href="{{ url_for('static', filename='images/' + img) }}" download class="btn btn-success action-btn">â¬‡</a>
<a href="/delete/{{ img }}" onclick="return confirm('Delete image?')" class="btn btn-outline-light action-btn">ğŸ—‘</a>
</div>

</div>
</div>
{% endfor %}
</div>
{% endif %}

</div>
</div>
</div>

<!-- MODAL -->
<div class="modal fade" id="imageModal">
<div class="modal-dialog modal-xl modal-dialog-centered">
<div class="modal-content bg-dark rounded-4">

<div class="modal-header border-0">
<h5 class="modal-title">ğŸ–¼ Image Preview</h5>
<button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body text-center">
<img id="modalImage" class="img-fluid rounded">
</div>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
